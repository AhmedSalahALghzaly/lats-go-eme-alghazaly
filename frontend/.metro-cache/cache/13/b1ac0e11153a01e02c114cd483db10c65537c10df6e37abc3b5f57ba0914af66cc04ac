{"dependencies":[{"name":"expo-image-manipulator","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":156},"end":{"line":6,"column":59,"index":215}}],"key":"jSCgza62Lmd+veZCOu0xCYv/BW8=","exportNames":["*"],"imports":1}},{"name":"expo-file-system","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":216},"end":{"line":7,"column":47,"index":263}}],"key":"6GyvFG3BsQPSqqu9QRKJ8hfZxPw=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"imageCompressionService\", {\n    enumerable: true,\n    get: function () {\n      return imageCompressionService;\n    }\n  });\n  var _expoImageManipulator = require(_dependencyMap[0], \"expo-image-manipulator\");\n  var ImageManipulator = _interopNamespace(_expoImageManipulator);\n  var _expoFileSystem = require(_dependencyMap[1], \"expo-file-system\");\n  var FileSystem = _interopNamespace(_expoFileSystem);\n  /**\n   * Image Compression Service\n   * Compresses images >1MB by 50% while preserving PNG format\n   * Uses expo-image-manipulator for client-side processing\n   */\n\n  // 1MB threshold in bytes\n  const SIZE_THRESHOLD_BYTES = 1 * 1024 * 1024;\n\n  // Compression quality (50% = 0.5)\n  const COMPRESSION_QUALITY = 0.5;\n  class ImageCompressionService {\n    /**\n     * Get the file size of an image from its URI\n     */\n    async getImageSize(uri) {\n      try {\n        // Handle base64 images\n        if (uri.startsWith('data:image')) {\n          const base64Data = uri.split(',')[1];\n          // Each base64 character represents 6 bits, so multiply by 3/4 to get bytes\n          return Math.ceil(base64Data.length * 3 / 4);\n        }\n\n        // Handle file URIs\n        const info = await FileSystem.getInfoAsync(uri);\n        return info.exists ? info.size || 0 : 0;\n      } catch (error) {\n        console.error('[ImageCompression] Error getting image size:', error);\n        return 0;\n      }\n    }\n\n    /**\n     * Detect if image is PNG based on URI or base64 data\n     */\n    isPngImage(uri) {\n      // Check URI extension\n      if (uri.toLowerCase().endsWith('.png')) return true;\n\n      // Check base64 header\n      if (uri.startsWith('data:image/png')) return true;\n      return false;\n    }\n\n    /**\n     * Compress an image if it exceeds 1MB\n     * Preserves PNG format for PNG images\n     */\n    async compressImage(uri, preserveFormat = true) {\n      try {\n        const originalSize = await this.getImageSize(uri);\n        const isPng = this.isPngImage(uri);\n        const outputFormat = preserveFormat && isPng ? ImageManipulator.SaveFormat.PNG : ImageManipulator.SaveFormat.JPEG;\n        console.log(`[ImageCompression] Processing image: ${originalSize} bytes, format: ${isPng ? 'PNG' : 'JPEG'}`);\n\n        // If image is under threshold, return original\n        if (originalSize < SIZE_THRESHOLD_BYTES) {\n          console.log('[ImageCompression] Image under 1MB, skipping compression');\n\n          // Get image dimensions\n          const info = await ImageManipulator.manipulateAsync(uri, [], {\n            base64: true\n          });\n          return {\n            uri: info.uri,\n            base64: info.base64,\n            width: info.width,\n            height: info.height,\n            originalSize,\n            compressedSize: originalSize,\n            compressionRatio: 1,\n            format: isPng ? 'png' : 'jpeg',\n            wasCompressed: false\n          };\n        }\n\n        // Compress the image by 50%\n        console.log('[ImageCompression] Compressing image by 50%...');\n\n        // For PNG, we use resize to reduce file size (PNG is lossless, so quality doesn't apply)\n        // For JPEG, we use compress quality\n        let manipulatedImage;\n        if (isPng && preserveFormat) {\n          // For PNG: Reduce dimensions to achieve ~50% file size reduction\n          // Since PNG is lossless, we need to reduce actual pixels\n          const scaleFactor = Math.sqrt(COMPRESSION_QUALITY); // ~0.707 for 50% reduction\n\n          manipulatedImage = await ImageManipulator.manipulateAsync(uri, [{\n            resize: {\n              width: undefined,\n              height: undefined\n            }\n          }],\n          // First get dimensions\n          {\n            format: ImageManipulator.SaveFormat.PNG,\n            base64: true\n          });\n\n          // Now resize with scale factor\n          const newWidth = Math.floor(manipulatedImage.width * scaleFactor);\n          const newHeight = Math.floor(manipulatedImage.height * scaleFactor);\n          manipulatedImage = await ImageManipulator.manipulateAsync(uri, [{\n            resize: {\n              width: newWidth,\n              height: newHeight\n            }\n          }], {\n            format: ImageManipulator.SaveFormat.PNG,\n            base64: true\n          });\n        } else {\n          // For JPEG: Use compress quality\n          manipulatedImage = await ImageManipulator.manipulateAsync(uri, [], {\n            compress: COMPRESSION_QUALITY,\n            format: ImageManipulator.SaveFormat.JPEG,\n            base64: true\n          });\n        }\n\n        // Calculate compressed size from base64\n        const compressedSize = manipulatedImage.base64 ? Math.ceil(manipulatedImage.base64.length * 3 / 4) : await this.getImageSize(manipulatedImage.uri);\n        const compressionRatio = originalSize > 0 ? compressedSize / originalSize : 1;\n        console.log(`[ImageCompression] Compressed: ${originalSize} -> ${compressedSize} bytes (${(compressionRatio * 100).toFixed(1)}%)`);\n        return {\n          uri: manipulatedImage.uri,\n          base64: manipulatedImage.base64,\n          width: manipulatedImage.width,\n          height: manipulatedImage.height,\n          originalSize,\n          compressedSize,\n          compressionRatio,\n          format: isPng && preserveFormat ? 'png' : 'jpeg',\n          wasCompressed: true\n        };\n      } catch (error) {\n        console.error('[ImageCompression] Compression failed:', error);\n        throw error;\n      }\n    }\n\n    /**\n     * Compress multiple images\n     */\n    async compressImages(uris) {\n      const results = [];\n      for (const uri of uris) {\n        try {\n          const result = await this.compressImage(uri);\n          results.push(result);\n        } catch (error) {\n          console.error(`[ImageCompression] Failed to compress image: ${uri}`, error);\n        }\n      }\n      return results;\n    }\n\n    /**\n     * Convert image to base64 with optional compression\n     */\n    async toBase64WithCompression(uri) {\n      try {\n        const result = await this.compressImage(uri);\n        if (result.base64) {\n          const mimeType = result.format === 'png' ? 'image/png' : 'image/jpeg';\n          return `data:${mimeType};base64,${result.base64}`;\n        }\n        return null;\n      } catch (error) {\n        console.error('[ImageCompression] Failed to convert to base64:', error);\n        return null;\n      }\n    }\n\n    /**\n     * Resize image to specific dimensions while maintaining aspect ratio\n     */\n    async resizeImage(uri, maxWidth, maxHeight, preserveFormat = true) {\n      try {\n        const isPng = this.isPngImage(uri);\n        const outputFormat = preserveFormat && isPng ? ImageManipulator.SaveFormat.PNG : ImageManipulator.SaveFormat.JPEG;\n        const originalSize = await this.getImageSize(uri);\n\n        // Get original dimensions\n        const originalImage = await ImageManipulator.manipulateAsync(uri, [], {});\n        const {\n          width: origWidth,\n          height: origHeight\n        } = originalImage;\n\n        // Calculate new dimensions maintaining aspect ratio\n        let newWidth = origWidth;\n        let newHeight = origHeight;\n        if (origWidth > maxWidth || origHeight > maxHeight) {\n          const widthRatio = maxWidth / origWidth;\n          const heightRatio = maxHeight / origHeight;\n          const ratio = Math.min(widthRatio, heightRatio);\n          newWidth = Math.floor(origWidth * ratio);\n          newHeight = Math.floor(origHeight * ratio);\n        }\n\n        // Resize\n        const resizedImage = await ImageManipulator.manipulateAsync(uri, [{\n          resize: {\n            width: newWidth,\n            height: newHeight\n          }\n        }], {\n          format: outputFormat,\n          compress: isPng ? 1 : COMPRESSION_QUALITY,\n          base64: true\n        });\n        const compressedSize = resizedImage.base64 ? Math.ceil(resizedImage.base64.length * 3 / 4) : await this.getImageSize(resizedImage.uri);\n        return {\n          uri: resizedImage.uri,\n          base64: resizedImage.base64,\n          width: resizedImage.width,\n          height: resizedImage.height,\n          originalSize,\n          compressedSize,\n          compressionRatio: originalSize > 0 ? compressedSize / originalSize : 1,\n          format: isPng && preserveFormat ? 'png' : 'jpeg',\n          wasCompressed: newWidth !== origWidth || newHeight !== origHeight\n        };\n      } catch (error) {\n        console.error('[ImageCompression] Resize failed:', error);\n        throw error;\n      }\n    }\n\n    /**\n     * Compress for upload - combines resize and quality compression\n     */\n    async compressForUpload(uri, options = {}) {\n      const {\n        maxWidth = 1920,\n        maxHeight = 1080,\n        preserveFormat = true\n      } = options;\n      try {\n        const originalSize = await this.getImageSize(uri);\n        const isPng = this.isPngImage(uri);\n\n        // First resize if needed\n        const resized = await this.resizeImage(uri, maxWidth, maxHeight, preserveFormat);\n\n        // Then compress if still over threshold\n        if (resized.compressedSize > SIZE_THRESHOLD_BYTES) {\n          return await this.compressImage(resized.uri, preserveFormat);\n        }\n        return resized;\n      } catch (error) {\n        console.error('[ImageCompression] CompressForUpload failed:', error);\n        throw error;\n      }\n    }\n  }\n  const imageCompressionService = new ImageCompressionService();\n  var _default = imageCompressionService;\n});","lineCount":298,"map":[[22,2,290,0,"Object"],[22,8,290,0],[22,9,290,0,"defineProperty"],[22,23,290,0],[22,24,290,0,"exports"],[22,31,290,0],[23,4,290,0,"enumerable"],[23,14,290,0],[24,4,290,0,"get"],[24,7,290,0],[24,18,290,0,"get"],[24,19,290,0],[25,6,290,0],[25,13,290,0,"_default"],[25,21,290,0],[26,4,290,0],[27,2,290,0],[28,2,289,0,"Object"],[28,8,289,0],[28,9,289,0,"defineProperty"],[28,23,289,0],[28,24,289,0,"exports"],[28,31,289,0],[29,4,289,0,"enumerable"],[29,14,289,0],[30,4,289,0,"get"],[30,7,289,0],[30,18,289,0,"get"],[30,19,289,0],[31,6,289,0],[31,13,289,0,"imageCompressionService"],[31,36,289,0],[32,4,289,0],[33,2,289,0],[34,2,6,0],[34,6,6,0,"_expoImageManipulator"],[34,27,6,0],[34,30,6,0,"require"],[34,37,6,0],[34,38,6,0,"_dependencyMap"],[34,52,6,0],[35,2,6,0],[35,6,6,0,"ImageManipulator"],[35,22,6,0],[35,25,6,0,"_interopNamespace"],[35,42,6,0],[35,43,6,0,"_expoImageManipulator"],[35,64,6,0],[36,2,7,0],[36,6,7,0,"_expoFileSystem"],[36,21,7,0],[36,24,7,0,"require"],[36,31,7,0],[36,32,7,0,"_dependencyMap"],[36,46,7,0],[37,2,7,0],[37,6,7,0,"FileSystem"],[37,16,7,0],[37,19,7,0,"_interopNamespace"],[37,36,7,0],[37,37,7,0,"_expoFileSystem"],[37,52,7,0],[38,2,1,0],[39,0,2,0],[40,0,3,0],[41,0,4,0],[42,0,5,0],[44,2,21,0],[45,2,22,0],[45,8,22,6,"SIZE_THRESHOLD_BYTES"],[45,28,22,26],[45,31,22,29],[45,32,22,30],[45,35,22,33],[45,39,22,37],[45,42,22,40],[45,46,22,44],[47,2,24,0],[48,2,25,0],[48,8,25,6,"COMPRESSION_QUALITY"],[48,27,25,25],[48,30,25,28],[48,33,25,31],[49,2,27,0],[49,8,27,6,"ImageCompressionService"],[49,31,27,29],[49,32,27,30],[50,4,28,2],[51,0,29,0],[52,0,30,0],[53,4,31,2],[53,10,31,8,"getImageSize"],[53,22,31,20,"getImageSize"],[53,23,31,21,"uri"],[53,26,31,32],[53,28,31,51],[54,6,32,4],[54,10,32,8],[55,8,33,6],[56,8,34,6],[56,12,34,10,"uri"],[56,15,34,13],[56,16,34,14,"startsWith"],[56,26,34,24],[56,27,34,25],[56,39,34,37],[56,40,34,38],[56,42,34,40],[57,10,35,8],[57,16,35,14,"base64Data"],[57,26,35,24],[57,29,35,27,"uri"],[57,32,35,30],[57,33,35,31,"split"],[57,38,35,36],[57,39,35,37],[57,42,35,40],[57,43,35,41],[57,44,35,42],[57,45,35,43],[57,46,35,44],[58,10,36,8],[59,10,37,8],[59,17,37,15,"Math"],[59,21,37,19],[59,22,37,20,"ceil"],[59,26,37,24],[59,27,37,26,"base64Data"],[59,37,37,36],[59,38,37,37,"length"],[59,44,37,43],[59,47,37,46],[59,48,37,47],[59,51,37,51],[59,52,37,52],[59,53,37,53],[60,8,38,6],[62,8,40,6],[63,8,41,6],[63,14,41,12,"info"],[63,18,41,16],[63,21,41,19],[63,27,41,25,"FileSystem"],[63,37,41,35],[63,38,41,36,"getInfoAsync"],[63,50,41,48],[63,51,41,49,"uri"],[63,54,41,52],[63,55,41,53],[64,8,42,6],[64,15,42,13,"info"],[64,19,42,17],[64,20,42,18,"exists"],[64,26,42,24],[64,29,42,28,"info"],[64,33,42,32],[64,34,42,33,"size"],[64,38,42,37],[64,42,42,41],[64,43,42,42],[64,46,42,46],[64,47,42,47],[65,6,43,4],[65,7,43,5],[65,8,43,6],[65,15,43,13,"error"],[65,20,43,18],[65,22,43,20],[66,8,44,6,"console"],[66,15,44,13],[66,16,44,14,"error"],[66,21,44,19],[66,22,44,20],[66,68,44,66],[66,70,44,68,"error"],[66,75,44,73],[66,76,44,74],[67,8,45,6],[67,15,45,13],[67,16,45,14],[68,6,46,4],[69,4,47,2],[71,4,49,2],[72,0,50,0],[73,0,51,0],[74,4,52,2,"isPngImage"],[74,14,52,12,"isPngImage"],[74,15,52,13,"uri"],[74,18,52,24],[74,20,52,35],[75,6,53,4],[76,6,54,4],[76,10,54,8,"uri"],[76,13,54,11],[76,14,54,12,"toLowerCase"],[76,25,54,23],[76,26,54,24],[76,27,54,25],[76,28,54,26,"endsWith"],[76,36,54,34],[76,37,54,35],[76,43,54,41],[76,44,54,42],[76,46,54,44],[76,53,54,51],[76,57,54,55],[78,6,56,4],[79,6,57,4],[79,10,57,8,"uri"],[79,13,57,11],[79,14,57,12,"startsWith"],[79,24,57,22],[79,25,57,23],[79,41,57,39],[79,42,57,40],[79,44,57,42],[79,51,57,49],[79,55,57,53],[80,6,59,4],[80,13,59,11],[80,18,59,16],[81,4,60,2],[83,4,62,2],[84,0,63,0],[85,0,64,0],[86,0,65,0],[87,4,66,2],[87,10,66,8,"compressImage"],[87,23,66,21,"compressImage"],[87,24,66,22,"uri"],[87,27,66,33],[87,29,66,35,"preserveFormat"],[87,43,66,58],[87,46,66,61],[87,50,66,65],[87,52,66,95],[88,6,67,4],[88,10,67,8],[89,8,68,6],[89,14,68,12,"originalSize"],[89,26,68,24],[89,29,68,27],[89,35,68,33],[89,39,68,37],[89,40,68,38,"getImageSize"],[89,52,68,50],[89,53,68,51,"uri"],[89,56,68,54],[89,57,68,55],[90,8,69,6],[90,14,69,12,"isPng"],[90,19,69,17],[90,22,69,20],[90,26,69,24],[90,27,69,25,"isPngImage"],[90,37,69,35],[90,38,69,36,"uri"],[90,41,69,39],[90,42,69,40],[91,8,70,6],[91,14,70,12,"outputFormat"],[91,26,70,24],[91,29,70,27,"preserveFormat"],[91,43,70,41],[91,47,70,45,"isPng"],[91,52,70,50],[91,55,70,53,"ImageManipulator"],[91,71,70,69],[91,72,70,70,"SaveFormat"],[91,82,70,80],[91,83,70,81,"PNG"],[91,86,70,84],[91,89,70,87,"ImageManipulator"],[91,105,70,103],[91,106,70,104,"SaveFormat"],[91,116,70,114],[91,117,70,115,"JPEG"],[91,121,70,119],[92,8,72,6,"console"],[92,15,72,13],[92,16,72,14,"log"],[92,19,72,17],[92,20,72,18],[92,60,72,58,"originalSize"],[92,72,72,70],[92,91,72,89,"isPng"],[92,96,72,94],[92,99,72,97],[92,104,72,102],[92,107,72,105],[92,113,72,111],[92,115,72,113],[92,116,72,114],[94,8,74,6],[95,8,75,6],[95,12,75,10,"originalSize"],[95,24,75,22],[95,27,75,25,"SIZE_THRESHOLD_BYTES"],[95,47,75,45],[95,49,75,47],[96,10,76,8,"console"],[96,17,76,15],[96,18,76,16,"log"],[96,21,76,19],[96,22,76,20],[96,80,76,78],[96,81,76,79],[98,10,78,8],[99,10,79,8],[99,16,79,14,"info"],[99,20,79,18],[99,23,79,21],[99,29,79,27,"ImageManipulator"],[99,45,79,43],[99,46,79,44,"manipulateAsync"],[99,61,79,59],[99,62,79,60,"uri"],[99,65,79,63],[99,67,79,65],[99,69,79,67],[99,71,79,69],[100,12,79,71,"base64"],[100,18,79,77],[100,20,79,79],[101,10,79,84],[101,11,79,85],[101,12,79,86],[102,10,81,8],[102,17,81,15],[103,12,82,10,"uri"],[103,15,82,13],[103,17,82,15,"info"],[103,21,82,19],[103,22,82,20,"uri"],[103,25,82,23],[104,12,83,10,"base64"],[104,18,83,16],[104,20,83,18,"info"],[104,24,83,22],[104,25,83,23,"base64"],[104,31,83,29],[105,12,84,10,"width"],[105,17,84,15],[105,19,84,17,"info"],[105,23,84,21],[105,24,84,22,"width"],[105,29,84,27],[106,12,85,10,"height"],[106,18,85,16],[106,20,85,18,"info"],[106,24,85,22],[106,25,85,23,"height"],[106,31,85,29],[107,12,86,10,"originalSize"],[107,24,86,22],[108,12,87,10,"compressedSize"],[108,26,87,24],[108,28,87,26,"originalSize"],[108,40,87,38],[109,12,88,10,"compressionRatio"],[109,28,88,26],[109,30,88,28],[109,31,88,29],[110,12,89,10,"format"],[110,18,89,16],[110,20,89,18,"isPng"],[110,25,89,23],[110,28,89,26],[110,33,89,31],[110,36,89,34],[110,42,89,40],[111,12,90,10,"wasCompressed"],[111,25,90,23],[111,27,90,25],[112,10,91,8],[112,11,91,9],[113,8,92,6],[115,8,94,6],[116,8,95,6,"console"],[116,15,95,13],[116,16,95,14,"log"],[116,19,95,17],[116,20,95,18],[116,68,95,66],[116,69,95,67],[118,8,97,6],[119,8,98,6],[120,8,99,6],[120,12,99,10,"manipulatedImage"],[120,28,99,26],[121,8,101,6],[121,12,101,10,"isPng"],[121,17,101,15],[121,21,101,19,"preserveFormat"],[121,35,101,33],[121,37,101,35],[122,10,102,8],[123,10,103,8],[124,10,104,8],[124,16,104,14,"scaleFactor"],[124,27,104,25],[124,30,104,28,"Math"],[124,34,104,32],[124,35,104,33,"sqrt"],[124,39,104,37],[124,40,104,38,"COMPRESSION_QUALITY"],[124,59,104,57],[124,60,104,58],[124,61,104,59],[124,62,104,60],[126,10,106,8,"manipulatedImage"],[126,26,106,24],[126,29,106,27],[126,35,106,33,"ImageManipulator"],[126,51,106,49],[126,52,106,50,"manipulateAsync"],[126,67,106,65],[126,68,107,10,"uri"],[126,71,107,13],[126,73,108,10],[126,74,108,11],[127,12,108,13,"resize"],[127,18,108,19],[127,20,108,21],[128,14,108,23,"width"],[128,19,108,28],[128,21,108,30,"undefined"],[128,30,108,39],[129,14,108,41,"height"],[129,20,108,47],[129,22,108,49,"undefined"],[130,12,108,59],[131,10,108,61],[131,11,108,62],[131,12,108,63],[132,10,108,65],[133,10,109,10],[134,12,109,12,"format"],[134,18,109,18],[134,20,109,20,"ImageManipulator"],[134,36,109,36],[134,37,109,37,"SaveFormat"],[134,47,109,47],[134,48,109,48,"PNG"],[134,51,109,51],[135,12,109,53,"base64"],[135,18,109,59],[135,20,109,61],[136,10,109,66],[136,11,110,8],[136,12,110,9],[138,10,112,8],[139,10,113,8],[139,16,113,14,"newWidth"],[139,24,113,22],[139,27,113,25,"Math"],[139,31,113,29],[139,32,113,30,"floor"],[139,37,113,35],[139,38,113,36,"manipulatedImage"],[139,54,113,52],[139,55,113,53,"width"],[139,60,113,58],[139,63,113,61,"scaleFactor"],[139,74,113,72],[139,75,113,73],[140,10,114,8],[140,16,114,14,"newHeight"],[140,25,114,23],[140,28,114,26,"Math"],[140,32,114,30],[140,33,114,31,"floor"],[140,38,114,36],[140,39,114,37,"manipulatedImage"],[140,55,114,53],[140,56,114,54,"height"],[140,62,114,60],[140,65,114,63,"scaleFactor"],[140,76,114,74],[140,77,114,75],[141,10,116,8,"manipulatedImage"],[141,26,116,24],[141,29,116,27],[141,35,116,33,"ImageManipulator"],[141,51,116,49],[141,52,116,50,"manipulateAsync"],[141,67,116,65],[141,68,117,10,"uri"],[141,71,117,13],[141,73,118,10],[141,74,118,11],[142,12,118,13,"resize"],[142,18,118,19],[142,20,118,21],[143,14,118,23,"width"],[143,19,118,28],[143,21,118,30,"newWidth"],[143,29,118,38],[144,14,118,40,"height"],[144,20,118,46],[144,22,118,48,"newHeight"],[145,12,118,58],[146,10,118,60],[146,11,118,61],[146,12,118,62],[146,14,119,10],[147,12,119,12,"format"],[147,18,119,18],[147,20,119,20,"ImageManipulator"],[147,36,119,36],[147,37,119,37,"SaveFormat"],[147,47,119,47],[147,48,119,48,"PNG"],[147,51,119,51],[148,12,119,53,"base64"],[148,18,119,59],[148,20,119,61],[149,10,119,66],[149,11,120,8],[149,12,120,9],[150,8,121,6],[150,9,121,7],[150,15,121,13],[151,10,122,8],[152,10,123,8,"manipulatedImage"],[152,26,123,24],[152,29,123,27],[152,35,123,33,"ImageManipulator"],[152,51,123,49],[152,52,123,50,"manipulateAsync"],[152,67,123,65],[152,68,124,10,"uri"],[152,71,124,13],[152,73,125,10],[152,75,125,12],[152,77,126,10],[153,12,126,12,"compress"],[153,20,126,20],[153,22,126,22,"COMPRESSION_QUALITY"],[153,41,126,41],[154,12,126,43,"format"],[154,18,126,49],[154,20,126,51,"ImageManipulator"],[154,36,126,67],[154,37,126,68,"SaveFormat"],[154,47,126,78],[154,48,126,79,"JPEG"],[154,52,126,83],[155,12,126,85,"base64"],[155,18,126,91],[155,20,126,93],[156,10,126,98],[156,11,127,8],[156,12,127,9],[157,8,128,6],[159,8,130,6],[160,8,131,6],[160,14,131,12,"compressedSize"],[160,28,131,26],[160,31,131,29,"manipulatedImage"],[160,47,131,45],[160,48,131,46,"base64"],[160,54,131,52],[160,57,132,10,"Math"],[160,61,132,14],[160,62,132,15,"ceil"],[160,66,132,19],[160,67,132,21,"manipulatedImage"],[160,83,132,37],[160,84,132,38,"base64"],[160,90,132,44],[160,91,132,45,"length"],[160,97,132,51],[160,100,132,54],[160,101,132,55],[160,104,132,59],[160,105,132,60],[160,106,132,61],[160,109,133,10],[160,115,133,16],[160,119,133,20],[160,120,133,21,"getImageSize"],[160,132,133,33],[160,133,133,34,"manipulatedImage"],[160,149,133,50],[160,150,133,51,"uri"],[160,153,133,54],[160,154,133,55],[161,8,135,6],[161,14,135,12,"compressionRatio"],[161,30,135,28],[161,33,135,31,"originalSize"],[161,45,135,43],[161,48,135,46],[161,49,135,47],[161,52,135,50,"compressedSize"],[161,66,135,64],[161,69,135,67,"originalSize"],[161,81,135,79],[161,84,135,82],[161,85,135,83],[162,8,137,6,"console"],[162,15,137,13],[162,16,137,14,"log"],[162,19,137,17],[162,20,137,18],[162,54,137,52,"originalSize"],[162,66,137,64],[162,73,137,71,"compressedSize"],[162,87,137,85],[162,98,137,96],[162,99,137,97,"compressionRatio"],[162,115,137,113],[162,118,137,116],[162,121,137,119],[162,123,137,121,"toFixed"],[162,130,137,128],[162,131,137,129],[162,132,137,130],[162,133,137,131],[162,137,137,135],[162,138,137,136],[163,8,139,6],[163,15,139,13],[164,10,140,8,"uri"],[164,13,140,11],[164,15,140,13,"manipulatedImage"],[164,31,140,29],[164,32,140,30,"uri"],[164,35,140,33],[165,10,141,8,"base64"],[165,16,141,14],[165,18,141,16,"manipulatedImage"],[165,34,141,32],[165,35,141,33,"base64"],[165,41,141,39],[166,10,142,8,"width"],[166,15,142,13],[166,17,142,15,"manipulatedImage"],[166,33,142,31],[166,34,142,32,"width"],[166,39,142,37],[167,10,143,8,"height"],[167,16,143,14],[167,18,143,16,"manipulatedImage"],[167,34,143,32],[167,35,143,33,"height"],[167,41,143,39],[168,10,144,8,"originalSize"],[168,22,144,20],[169,10,145,8,"compressedSize"],[169,24,145,22],[170,10,146,8,"compressionRatio"],[170,26,146,24],[171,10,147,8,"format"],[171,16,147,14],[171,18,147,16,"isPng"],[171,23,147,21],[171,27,147,25,"preserveFormat"],[171,41,147,39],[171,44,147,42],[171,49,147,47],[171,52,147,50],[171,58,147,56],[172,10,148,8,"wasCompressed"],[172,23,148,21],[172,25,148,23],[173,8,149,6],[173,9,149,7],[174,6,150,4],[174,7,150,5],[174,8,150,6],[174,15,150,13,"error"],[174,20,150,18],[174,22,150,20],[175,8,151,6,"console"],[175,15,151,13],[175,16,151,14,"error"],[175,21,151,19],[175,22,151,20],[175,62,151,60],[175,64,151,62,"error"],[175,69,151,67],[175,70,151,68],[176,8,152,6],[176,14,152,12,"error"],[176,19,152,17],[177,6,153,4],[178,4,154,2],[180,4,156,2],[181,0,157,0],[182,0,158,0],[183,4,159,2],[183,10,159,8,"compressImages"],[183,24,159,22,"compressImages"],[183,25,159,23,"uris"],[183,29,159,37],[183,31,159,69],[184,6,160,4],[184,12,160,10,"results"],[184,19,160,38],[184,22,160,41],[184,24,160,43],[185,6,162,4],[185,11,162,9],[185,17,162,15,"uri"],[185,20,162,18],[185,24,162,22,"uris"],[185,28,162,26],[185,30,162,28],[186,8,163,6],[186,12,163,10],[187,10,164,8],[187,16,164,14,"result"],[187,22,164,20],[187,25,164,23],[187,31,164,29],[187,35,164,33],[187,36,164,34,"compressImage"],[187,49,164,47],[187,50,164,48,"uri"],[187,53,164,51],[187,54,164,52],[188,10,165,8,"results"],[188,17,165,15],[188,18,165,16,"push"],[188,22,165,20],[188,23,165,21,"result"],[188,29,165,27],[188,30,165,28],[189,8,166,6],[189,9,166,7],[189,10,166,8],[189,17,166,15,"error"],[189,22,166,20],[189,24,166,22],[190,10,167,8,"console"],[190,17,167,15],[190,18,167,16,"error"],[190,23,167,21],[190,24,167,22],[190,72,167,70,"uri"],[190,75,167,73],[190,77,167,75],[190,79,167,77,"error"],[190,84,167,82],[190,85,167,83],[191,8,168,6],[192,6,169,4],[193,6,171,4],[193,13,171,11,"results"],[193,20,171,18],[194,4,172,2],[196,4,174,2],[197,0,175,0],[198,0,176,0],[199,4,177,2],[199,10,177,8,"toBase64WithCompression"],[199,33,177,31,"toBase64WithCompression"],[199,34,177,32,"uri"],[199,37,177,43],[199,39,177,69],[200,6,178,4],[200,10,178,8],[201,8,179,6],[201,14,179,12,"result"],[201,20,179,18],[201,23,179,21],[201,29,179,27],[201,33,179,31],[201,34,179,32,"compressImage"],[201,47,179,45],[201,48,179,46,"uri"],[201,51,179,49],[201,52,179,50],[202,8,181,6],[202,12,181,10,"result"],[202,18,181,16],[202,19,181,17,"base64"],[202,25,181,23],[202,27,181,25],[203,10,182,8],[203,16,182,14,"mimeType"],[203,24,182,22],[203,27,182,25,"result"],[203,33,182,31],[203,34,182,32,"format"],[203,40,182,38],[203,45,182,43],[203,50,182,48],[203,53,182,51],[203,64,182,62],[203,67,182,65],[203,79,182,77],[204,10,183,8],[204,17,183,15],[204,25,183,23,"mimeType"],[204,33,183,31],[204,44,183,42,"result"],[204,50,183,48],[204,51,183,49,"base64"],[204,57,183,55],[204,59,183,57],[205,8,184,6],[206,8,186,6],[206,15,186,13],[206,19,186,17],[207,6,187,4],[207,7,187,5],[207,8,187,6],[207,15,187,13,"error"],[207,20,187,18],[207,22,187,20],[208,8,188,6,"console"],[208,15,188,13],[208,16,188,14,"error"],[208,21,188,19],[208,22,188,20],[208,71,188,69],[208,73,188,71,"error"],[208,78,188,76],[208,79,188,77],[209,8,189,6],[209,15,189,13],[209,19,189,17],[210,6,190,4],[211,4,191,2],[213,4,193,2],[214,0,194,0],[215,0,195,0],[216,4,196,2],[216,10,196,8,"resizeImage"],[216,21,196,19,"resizeImage"],[216,22,197,4,"uri"],[216,25,197,15],[216,27,198,4,"maxWidth"],[216,35,198,20],[216,37,199,4,"maxHeight"],[216,46,199,21],[216,48,200,4,"preserveFormat"],[216,62,200,27],[216,65,200,30],[216,69,200,34],[216,71,201,32],[217,6,202,4],[217,10,202,8],[218,8,203,6],[218,14,203,12,"isPng"],[218,19,203,17],[218,22,203,20],[218,26,203,24],[218,27,203,25,"isPngImage"],[218,37,203,35],[218,38,203,36,"uri"],[218,41,203,39],[218,42,203,40],[219,8,204,6],[219,14,204,12,"outputFormat"],[219,26,204,24],[219,29,204,27,"preserveFormat"],[219,43,204,41],[219,47,204,45,"isPng"],[219,52,204,50],[219,55,204,53,"ImageManipulator"],[219,71,204,69],[219,72,204,70,"SaveFormat"],[219,82,204,80],[219,83,204,81,"PNG"],[219,86,204,84],[219,89,204,87,"ImageManipulator"],[219,105,204,103],[219,106,204,104,"SaveFormat"],[219,116,204,114],[219,117,204,115,"JPEG"],[219,121,204,119],[220,8,205,6],[220,14,205,12,"originalSize"],[220,26,205,24],[220,29,205,27],[220,35,205,33],[220,39,205,37],[220,40,205,38,"getImageSize"],[220,52,205,50],[220,53,205,51,"uri"],[220,56,205,54],[220,57,205,55],[222,8,207,6],[223,8,208,6],[223,14,208,12,"originalImage"],[223,27,208,25],[223,30,208,28],[223,36,208,34,"ImageManipulator"],[223,52,208,50],[223,53,208,51,"manipulateAsync"],[223,68,208,66],[223,69,208,67,"uri"],[223,72,208,70],[223,74,208,72],[223,76,208,74],[223,78,208,76],[223,79,208,77],[223,80,208,78],[223,81,208,79],[224,8,209,6],[224,14,209,12],[225,10,209,14,"width"],[225,15,209,19],[225,17,209,21,"origWidth"],[225,26,209,30],[226,10,209,32,"height"],[226,16,209,38],[226,18,209,40,"origHeight"],[227,8,209,51],[227,9,209,52],[227,12,209,55,"originalImage"],[227,25,209,68],[229,8,211,6],[230,8,212,6],[230,12,212,10,"newWidth"],[230,20,212,18],[230,23,212,21,"origWidth"],[230,32,212,30],[231,8,213,6],[231,12,213,10,"newHeight"],[231,21,213,19],[231,24,213,22,"origHeight"],[231,34,213,32],[232,8,215,6],[232,12,215,10,"origWidth"],[232,21,215,19],[232,24,215,22,"maxWidth"],[232,32,215,30],[232,36,215,34,"origHeight"],[232,46,215,44],[232,49,215,47,"maxHeight"],[232,58,215,56],[232,60,215,58],[233,10,216,8],[233,16,216,14,"widthRatio"],[233,26,216,24],[233,29,216,27,"maxWidth"],[233,37,216,35],[233,40,216,38,"origWidth"],[233,49,216,47],[234,10,217,8],[234,16,217,14,"heightRatio"],[234,27,217,25],[234,30,217,28,"maxHeight"],[234,39,217,37],[234,42,217,40,"origHeight"],[234,52,217,50],[235,10,218,8],[235,16,218,14,"ratio"],[235,21,218,19],[235,24,218,22,"Math"],[235,28,218,26],[235,29,218,27,"min"],[235,32,218,30],[235,33,218,31,"widthRatio"],[235,43,218,41],[235,45,218,43,"heightRatio"],[235,56,218,54],[235,57,218,55],[236,10,220,8,"newWidth"],[236,18,220,16],[236,21,220,19,"Math"],[236,25,220,23],[236,26,220,24,"floor"],[236,31,220,29],[236,32,220,30,"origWidth"],[236,41,220,39],[236,44,220,42,"ratio"],[236,49,220,47],[236,50,220,48],[237,10,221,8,"newHeight"],[237,19,221,17],[237,22,221,20,"Math"],[237,26,221,24],[237,27,221,25,"floor"],[237,32,221,30],[237,33,221,31,"origHeight"],[237,43,221,41],[237,46,221,44,"ratio"],[237,51,221,49],[237,52,221,50],[238,8,222,6],[240,8,224,6],[241,8,225,6],[241,14,225,12,"resizedImage"],[241,26,225,24],[241,29,225,27],[241,35,225,33,"ImageManipulator"],[241,51,225,49],[241,52,225,50,"manipulateAsync"],[241,67,225,65],[241,68,226,8,"uri"],[241,71,226,11],[241,73,227,8],[241,74,227,9],[242,10,227,11,"resize"],[242,16,227,17],[242,18,227,19],[243,12,227,21,"width"],[243,17,227,26],[243,19,227,28,"newWidth"],[243,27,227,36],[244,12,227,38,"height"],[244,18,227,44],[244,20,227,46,"newHeight"],[245,10,227,56],[246,8,227,58],[246,9,227,59],[246,10,227,60],[246,12,228,8],[247,10,229,10,"format"],[247,16,229,16],[247,18,229,18,"outputFormat"],[247,30,229,30],[248,10,230,10,"compress"],[248,18,230,18],[248,20,230,20,"isPng"],[248,25,230,25],[248,28,230,28],[248,29,230,29],[248,32,230,32,"COMPRESSION_QUALITY"],[248,51,230,51],[249,10,231,10,"base64"],[249,16,231,16],[249,18,231,18],[250,8,232,8],[250,9,233,6],[250,10,233,7],[251,8,235,6],[251,14,235,12,"compressedSize"],[251,28,235,26],[251,31,235,29,"resizedImage"],[251,43,235,41],[251,44,235,42,"base64"],[251,50,235,48],[251,53,236,10,"Math"],[251,57,236,14],[251,58,236,15,"ceil"],[251,62,236,19],[251,63,236,21,"resizedImage"],[251,75,236,33],[251,76,236,34,"base64"],[251,82,236,40],[251,83,236,41,"length"],[251,89,236,47],[251,92,236,50],[251,93,236,51],[251,96,236,55],[251,97,236,56],[251,98,236,57],[251,101,237,10],[251,107,237,16],[251,111,237,20],[251,112,237,21,"getImageSize"],[251,124,237,33],[251,125,237,34,"resizedImage"],[251,137,237,46],[251,138,237,47,"uri"],[251,141,237,50],[251,142,237,51],[252,8,239,6],[252,15,239,13],[253,10,240,8,"uri"],[253,13,240,11],[253,15,240,13,"resizedImage"],[253,27,240,25],[253,28,240,26,"uri"],[253,31,240,29],[254,10,241,8,"base64"],[254,16,241,14],[254,18,241,16,"resizedImage"],[254,30,241,28],[254,31,241,29,"base64"],[254,37,241,35],[255,10,242,8,"width"],[255,15,242,13],[255,17,242,15,"resizedImage"],[255,29,242,27],[255,30,242,28,"width"],[255,35,242,33],[256,10,243,8,"height"],[256,16,243,14],[256,18,243,16,"resizedImage"],[256,30,243,28],[256,31,243,29,"height"],[256,37,243,35],[257,10,244,8,"originalSize"],[257,22,244,20],[258,10,245,8,"compressedSize"],[258,24,245,22],[259,10,246,8,"compressionRatio"],[259,26,246,24],[259,28,246,26,"originalSize"],[259,40,246,38],[259,43,246,41],[259,44,246,42],[259,47,246,45,"compressedSize"],[259,61,246,59],[259,64,246,62,"originalSize"],[259,76,246,74],[259,79,246,77],[259,80,246,78],[260,10,247,8,"format"],[260,16,247,14],[260,18,247,16,"isPng"],[260,23,247,21],[260,27,247,25,"preserveFormat"],[260,41,247,39],[260,44,247,42],[260,49,247,47],[260,52,247,50],[260,58,247,56],[261,10,248,8,"wasCompressed"],[261,23,248,21],[261,25,248,23,"newWidth"],[261,33,248,31],[261,38,248,36,"origWidth"],[261,47,248,45],[261,51,248,49,"newHeight"],[261,60,248,58],[261,65,248,63,"origHeight"],[262,8,249,6],[262,9,249,7],[263,6,250,4],[263,7,250,5],[263,8,250,6],[263,15,250,13,"error"],[263,20,250,18],[263,22,250,20],[264,8,251,6,"console"],[264,15,251,13],[264,16,251,14,"error"],[264,21,251,19],[264,22,251,20],[264,57,251,55],[264,59,251,57,"error"],[264,64,251,62],[264,65,251,63],[265,8,252,6],[265,14,252,12,"error"],[265,19,252,17],[266,6,253,4],[267,4,254,2],[269,4,256,2],[270,0,257,0],[271,0,258,0],[272,4,259,2],[272,10,259,8,"compressForUpload"],[272,27,259,25,"compressForUpload"],[272,28,260,4,"uri"],[272,31,260,15],[272,33,261,4,"options"],[272,40,265,5],[272,43,265,8],[272,44,265,9],[272,45,265,10],[272,47,266,32],[273,6,267,4],[273,12,267,10],[274,8,267,12,"maxWidth"],[274,16,267,20],[274,19,267,23],[274,23,267,27],[275,8,267,29,"maxHeight"],[275,17,267,38],[275,20,267,41],[275,24,267,45],[276,8,267,47,"preserveFormat"],[276,22,267,61],[276,25,267,64],[277,6,267,69],[277,7,267,70],[277,10,267,73,"options"],[277,17,267,80],[278,6,269,4],[278,10,269,8],[279,8,270,6],[279,14,270,12,"originalSize"],[279,26,270,24],[279,29,270,27],[279,35,270,33],[279,39,270,37],[279,40,270,38,"getImageSize"],[279,52,270,50],[279,53,270,51,"uri"],[279,56,270,54],[279,57,270,55],[280,8,271,6],[280,14,271,12,"isPng"],[280,19,271,17],[280,22,271,20],[280,26,271,24],[280,27,271,25,"isPngImage"],[280,37,271,35],[280,38,271,36,"uri"],[280,41,271,39],[280,42,271,40],[282,8,273,6],[283,8,274,6],[283,14,274,12,"resized"],[283,21,274,19],[283,24,274,22],[283,30,274,28],[283,34,274,32],[283,35,274,33,"resizeImage"],[283,46,274,44],[283,47,274,45,"uri"],[283,50,274,48],[283,52,274,50,"maxWidth"],[283,60,274,58],[283,62,274,60,"maxHeight"],[283,71,274,69],[283,73,274,71,"preserveFormat"],[283,87,274,85],[283,88,274,86],[285,8,276,6],[286,8,277,6],[286,12,277,10,"resized"],[286,19,277,17],[286,20,277,18,"compressedSize"],[286,34,277,32],[286,37,277,35,"SIZE_THRESHOLD_BYTES"],[286,57,277,55],[286,59,277,57],[287,10,278,8],[287,17,278,15],[287,23,278,21],[287,27,278,25],[287,28,278,26,"compressImage"],[287,41,278,39],[287,42,278,40,"resized"],[287,49,278,47],[287,50,278,48,"uri"],[287,53,278,51],[287,55,278,53,"preserveFormat"],[287,69,278,67],[287,70,278,68],[288,8,279,6],[289,8,281,6],[289,15,281,13,"resized"],[289,22,281,20],[290,6,282,4],[290,7,282,5],[290,8,282,6],[290,15,282,13,"error"],[290,20,282,18],[290,22,282,20],[291,8,283,6,"console"],[291,15,283,13],[291,16,283,14,"error"],[291,21,283,19],[291,22,283,20],[291,68,283,66],[291,70,283,68,"error"],[291,75,283,73],[291,76,283,74],[292,8,284,6],[292,14,284,12,"error"],[292,19,284,17],[293,6,285,4],[294,4,286,2],[295,2,287,0],[296,2,289,7],[296,8,289,13,"imageCompressionService"],[296,31,289,36],[296,34,289,39],[296,38,289,43,"ImageCompressionService"],[296,61,289,66],[296,62,289,67],[296,63,289,68],[297,2,290,0],[297,6,290,0,"_default"],[297,14,290,0],[297,17,290,15,"imageCompressionService"],[297,40,290,38],[298,0,290,39],[298,3]],"functionMap":{"names":["<global>","ImageCompressionService","ImageCompressionService#getImageSize","ImageCompressionService#isPngImage","ImageCompressionService#compressImage","ImageCompressionService#compressImages","ImageCompressionService#toBase64WithCompression","ImageCompressionService#resizeImage","ImageCompressionService#compressForUpload"],"mappings":"AAA;AC0B;ECI;GDgB;EEK;GFQ;EGM;GHwF;EIK;GJa;EKK;GLc;EMK;GN0D;EOK;GP2B;CDC"},"hasCjsExports":false},"type":"js/module"}]}